<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Admin Panel - My Show Time</title>
</head>
<body>
  <div class="flex min-h-screen bg-gray-100">
    <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-md">
      <div class="p-6 font-bold text-purple-700 text-2xl">AdminPanel</div>
      <nav class="mt-8">
        <a href="/admin" class="block py-3 px-6 text-gray-700 hover:bg-purple-100">Dashboard</a>
        <a href="#users" class="block py-3 px-6 text-gray-700 hover:bg-purple-100">Users</a>
        <a href="#artists" class="block py-3 px-6 text-gray-700 hover:bg-purple-100">Artists</a>
        <a href="#concerts" class="block py-3 px-6 text-gray-700 hover:bg-purple-100">Concerts</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <!-- Top Navbar -->
      <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <h1 class="text-xl font-bold text-purple-700">Dashboard</h1>
        <div class="flex items-center gap-4">
          <input type="text" placeholder="Search..." class="px-4 py-2 border rounded-lg" />
          <div class="w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold">AD</div>
        </div>
      </header>

      <!-- Content -->
      <main class="p-6 space-y-6">
        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <p class="text-sm text-gray-500">Total Users</p>
            <h2 class="text-3xl font-bold text-purple-700 mt-2">{{users.length}}</h2>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <p class="text-sm text-gray-500">Artists</p>
            <h2 class="text-3xl font-bold text-green-600 mt-2">{{artists.length}}</h2>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <p class="text-sm text-gray-500">Concerts</p>
            <h2 class="text-3xl font-bold text-blue-600 mt-2">{{concerts.length}}</h2>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <p class="text-sm text-gray-500">Admin Actions</p>
            <h2 class="text-3xl font-bold text-red-500 mt-2>—</h2>
          </div>
        </div>

        <!-- Users Table -->
        <div id="users" class="bg-white rounded-lg shadow-md">
          <div class="p-4 border-b font-bold text-purple-700">Users ({{users.length}})</div>
          <table class="w-full text-left">
            <thead class="bg-purple-50">
              <tr>
                <th class="p-4">ID</th>
                <th class="p-4">Email</th>
                <th class="p-4">Role</th>
                <th class="p-4">Actions</th>
              </tr>
            </thead>
            <tbody>
              {{#each users}}
                <tr class="border-t hover:bg-gray-50">
                  <td class="p-4">{{this.id}}</td>
                  <td class="p-4">{{this.email}}</td>
                  <td class="p-4">{{this.role}}</td>
                  <td class="p-4">
                    <button onclick="deleteUser({{this.id}})" class="text-red-600 hover:underline">Delete</button>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>

        <!-- Artists Table -->
        <div id="artists" class="bg-white rounded-lg shadow-md">
          <div class="p-4 border-b font-bold text-purple-700">Artists ({{artists.length}})</div>
          <table class="w-full text-left">
            <thead class="bg-purple-50">
              <tr>
                <th class="p-4">ID</th>
                <th class="p-4">Name</th>
                <th class="p-4">Genre</th>
                <th class="p-4">Actions</th>
              </tr>
            </thead>
            <tbody>
              {{#each artists}}
                <tr class="border-t hover:bg-gray-50">
                  <td class="p-4">{{this.id}}</td>
                  <td class="p-4">{{this.name}}</td>
                  <td class="p-4">{{this.genre}}</td>
                  <td class="p-4">
                    <button onclick="deleteArtist({{this.id}})" class="text-red-600 hover:underline">Delete</button>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>

        <!-- Concerts Table -->
        <div id="concerts" class="bg-white rounded-lg shadow-md">
          <div class="p-4 border-b font-bold text-purple-700">Concerts ({{concerts.length}})</div>
          <table class="w-full text-left">
            <thead class="bg-purple-50">
              <tr>
                <th class="p-4">ID</th>
                <th class="p-4">Name</th>
                <th class="p-4">Date</th>
                <th class="p-4">Artist</th>
                <th class="p-4">Actions</th>
              </tr>
            </thead>
            <tbody>
              {{#each concerts}}
                <tr class="border-t hover:bg-gray-50">
                  <td class="p-4">{{this.id}}</td>
                  <td class="p-4">{{this.name}}</td>
                  <td class="p-4">{{this.date}}</td>
                  <td class="p-4">{{this.artistName}}</td>
                  <td class="p-4">
                    <button onclick="deleteConcert({{this.id}})" class="text-red-600 hover:underline">Delete</button>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white p-6 rounded-lg shadow-md grid grid-cols-2 md:grid-cols-4 gap-4">
          <!-- Tu peux ajouter des formulaires ici plus tard -->
          <button class="bg-purple-600 text-white py-3 rounded-lg shadow hover:bg-purple-700" onclick="alert('Feature coming soon')">Add User</button>
          <button class="bg-blue-600 text-white py-3 rounded-lg shadow hover:bg-blue-700" onclick="alert('Feature coming soon')">Add Artist</button>
          <button class="bg-green-600 text-white py-3 rounded-lg shadow hover:bg-green-700" onclick="alert('Feature coming soon')">Add Concert</button>
          <button class="bg-red-600 text-white py-3 rounded-lg shadow hover:bg-red-700" onclick="alert('Use delete buttons above')">Delete Records</button>
        </div>
      </main>

      <footer class="bg-white p-4 mt-auto text-center text-sm text-gray-400 border-t">
        © 2025 My Show Time Admin. All rights reserved.
      </footer>
    </div>
  </div>

  <script>
    async function deleteUser(id) {
      if (confirm('Delete this user?')) {
        await fetch(`/admin/users/${id}`, { method: 'DELETE' });
        location.reload();
      }
    }

    async function deleteArtist(id) {
      if (confirm('Delete this artist?')) {
        await fetch(`/admin/artists/${id}`, { method: 'DELETE' });
        location.reload();
      }
    }

    async function deleteConcert(id) {
      if (confirm('Delete this concert?')) {
        await fetch(`/admin/concerts/${id}`, { method: 'DELETE' });
        location.reload();
      }
    }
  </script>
</body>
</html>